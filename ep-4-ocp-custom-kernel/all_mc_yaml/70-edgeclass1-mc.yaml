apiVersion: machineconfiguration.openshift.io/v1
kind: MachineConfig
metadata:
  labels:
    machineconfiguration.openshift.io/role: edgeclass1
  name: 70-edgeclass1
spec:
  config:
    ignition:
      version: 3.1.0
    storage:
      files:
      - contents:
          source: data:text/plain;charset=utf-8;base64,IyMgVmFyaWFibGVzIGZvciBrZXJuZWwgc3dhcHBpbmcgaW4gUmVkIEhhdCBDb3JlT1MKIyMgUlBNIHJlcG9zaXRvcnkKIyMgaHR0cHM6Ly9rb2ppLmZlZG9yYXByb2plY3Qub3JnL2tvamkvcGFja2FnZWluZm8/cGFja2FnZUlEPTgKIyMgaHR0cHM6Ly9rb2ppLmZlZG9yYXByb2plY3Qub3JnL2tvamkvYnVpbGRpbmZvP2J1aWxkSUQ9MTcyMjMxMAojIyBTYW1wbGUgUGFja2FnZSBjby1vcmRpbmF0ZXMKIyMgaHR0cHM6Ly9rb2ppcGtncy5mZWRvcmFwcm9qZWN0Lm9yZy8vcGFja2FnZXMva2VybmVsLzUuMTAuMjMvMjAwLmZjMzMveDg2XzY0L2tlcm5lbC01LjEwLjIzLTIwMC5mYzMzLng4Nl82NC5ycG0KIyMgaHR0cHM6Ly9rb2ppcGtncy5mZWRvcmFwcm9qZWN0Lm9yZy8vcGFja2FnZXMva2VybmVsLzUuMTAuMjMvMjAwLmZjMzMveDg2XzY0L2tlcm5lbC1jb3JlLTUuMTAuMjMtMjAwLmZjMzMueDg2XzY0LnJwbQojIyBodHRwczovL2tvamlwa2dzLmZlZG9yYXByb2plY3Qub3JnLy9wYWNrYWdlcy9rZXJuZWwvNS4xMC4yMy8yMDAuZmMzMy94ODZfNjQva2VybmVsLW1vZHVsZXMtNS4xMC4yMy0yMDAuZmMzMy54ODZfNjQucnBtCiMjIGh0dHBzOi8va29qaXBrZ3MuZmVkb3JhcHJvamVjdC5vcmcvL3BhY2thZ2VzL2tlcm5lbC81LjEwLjIzLzIwMC5mYzMzL3g4Nl82NC9rZXJuZWwtbW9kdWxlcy1leHRyYS01LjEwLjIzLTIwMC5mYzMzLng4Nl82NC5ycG0KCmZlZG9yYV9kb3dubG9hZF9iYXNlX3VybD1odHRwczovL2tvamlwa2dzLmZlZG9yYXByb2plY3Qub3JnLy9wYWNrYWdlcy9rZXJuZWwKI2tlcm5lbF92ZXJzaW9uPQoja2VybmVsX3ZlcnNpb249NS4xMC4yMy0yMDAuZmMzMwprZXJuZWxfdmVyc2lvbj01LjExLjctMjAwLmZjMzMKa2VybmVsX2FyY2g9eDg2XzY0Cg==
        mode: 420
        overwrite: true
        path: /etc/openshiftcustomkerneld/openshiftcustomkernel.conf
      - contents:
          source: data:text/plain;charset=utf-8;base64,IyEvYmluL2Jhc2gKCnRlbXBfZm9sZGVyPS90bXAKaXNfcmVib290X3JlcXVpcmVkPTAKCiMjIEN1cnJlbnQgT1NUcmVlCmVjaG8gIiIKZWNobyAiIgplY2hvICIjIyMjIyMgQ3VycmVudCBPU1RyZWUgIyMjIyMjIgpycG0tb3N0cmVlIHN0YXR1cwoKZWNobyAiIgplY2hvICIjIyMjIyMgVGFyZ2V0IGtlcm5lbCBkZXRhaWxzIgoKIyMgQ2hlY2sgaWYgdGhlIGNvbmYgZmlsZSBpcyBwcmVzZW50IGFuZCByZXRyaWV2ZSB0aGUgdmFyaWFibGVzCmlmIHRlc3QgLWYgL2V0Yy9vcGVuc2hpZnRjdXN0b21rZXJuZWxkL29wZW5zaGlmdGN1c3RvbWtlcm5lbC5jb25mIDsgCiAgdGhlbgogICAgc291cmNlIC9ldGMvb3BlbnNoaWZ0Y3VzdG9ta2VybmVsZC9vcGVuc2hpZnRjdXN0b21rZXJuZWwuY29uZgoKICAgIGtlcm5lbF92ZXJzaW9uPSQoZWNobyAiJGtlcm5lbF92ZXJzaW9uIiB8IHNlZCAncy8gKiQvL2cnKQogICAga2VybmVsX2FyY2g9JChlY2hvICIka2VybmVsX2FyY2giIHwgc2VkICdzLyAqJC8vZycpCiAgICAKICAgIGtlcm5lbD1rZXJuZWwtJGtlcm5lbF92ZXJzaW9uLiRrZXJuZWxfYXJjaAogICAga2VybmVsX2NvcmU9a2VybmVsLWNvcmUtJGtlcm5lbF92ZXJzaW9uLiRrZXJuZWxfYXJjaAogICAga2VybmVsX21vZHVsZXM9a2VybmVsLW1vZHVsZXMtJGtlcm5lbF92ZXJzaW9uLiRrZXJuZWxfYXJjaAogICAga2VybmVsX21vZHVsZXNfZXh0cmE9a2VybmVsLW1vZHVsZXMtZXh0cmEtJGtlcm5lbF92ZXJzaW9uLiRrZXJuZWxfYXJjaAoKICAgIGVjaG8gInRhcmdldCBrZXJuZWxfdmVyc2lvbj0ka2VybmVsX3ZlcnNpb24iCiAgICBlY2hvICJ0YXJnZXQga2VybmVsX2FyY2g9JGtlcm5lbF9hcmNoIgogICAgZWNobyAidGFyZ2V0IGtlcm5lbCBwYWNrYWdlPSRrZXJuZWwiCiAgICBlY2hvICJ0YXJnZXQga2VybmVsX2NvcmUgcGFja2FnZT0ka2VybmVsX2NvcmUiCiAgICBlY2hvICJ0YXJnZXQga2VybmVsX21vZHVsZXMgcGFja2FnZT0ka2VybmVsX21vZHVsZXMiCiAgICBlY2hvICJ0YXJnZXQga2VybmVsX21vZHVsZXNfZXh0cmEgcGFja2FnZT0ka2VybmVsX21vZHVsZXNfZXh0cmEiCgogICAgIyMgQ2hlY2sgaWYgdGhlIHRhcmdldCBrZXJuZWwgaXMgZW1wdHkKCiAgICBpZiBbICIka2VybmVsX3ZlcnNpb24iID09ICIiIF0KICAgICAgdGhlbgogICAgICAgIGVjaG8gIiIKICAgICAgICBlY2hvICIjIyMjIyMgTm8gdmFsdWUgc2V0IGZvciB2YXJpYWJsZSBrZXJuZWxfdmVyc2lvbi4gT1Mgd2lsbCBiZSBmYWN0b3J5IHJlc2V0LiIKICAgICAgICBycG0tb3N0cmVlIHJlc2V0IC1sbyAtcgogICAgICAgIGV4aXQgMAogICAgZmkKCiAgICAjIyBDaGVjayBpZiB0aGUgdGFyZ2V0IGtlcm5lbCBpcyBhbHJlYWR5IGluc3RhbGxlZAogICAgZWNobyAiIgogICAgZWNobyAiIyMjIyMjIENoZWNraW5nIGZvciB0YXJnZXQgcGFja2FnZXMgaW5zdGFsbCBzdGF0ZSIKICAgIHJwbSAtcSAiJGtlcm5lbF9jb3JlIgogICAgaXNfdGFyZ2V0X2tlcm5lbF9jb3JlX2luc3RhbGxlZD0kPwogICAgZWNobyAiIgoKCiAgICAjIyBEb3dubG9hZCBhbmQgaW5zdGFsbCB0aGUgdGFyZ2V0IGtlcm5lbCBpZiBub3QgaW5zdGFsbGVkCgogICAga2VybmVsX3ZlcnNpb25fcGFydHM9KCR7a2VybmVsX3ZlcnNpb24vLy0vIH0pCgogICAgaWYgWyAkaXNfdGFyZ2V0X2tlcm5lbF9jb3JlX2luc3RhbGxlZCAtZXEgMCBdIDsgCiAgICAgIHRoZW4KICAgICAgICBlY2hvICIiCiAgICAgICAgZWNobyAiIyMjIyMjIFRhcmdldCBrZXJuZWwgYWxyZWFkeSBpbnN0YWxsZWQ6ICRrZXJuZWxfY29yZSIKCiAgICAgIGVsc2UKICAgICAgICBycG0tb3N0cmVlIHJlc2V0IC1sbwoKICAgICAgICBlY2hvICIiCiAgICAgICAgZWNobyAiIyMjIyMjIERvd25sb2FkaW5nIHRhcmdldCBrZXJuZWwgY29yZTogJGtlcm5lbF9jb3JlIgogICAgICAgIGVjaG8gImN1cmwgJGZlZG9yYV9kb3dubG9hZF9iYXNlX3VybC8ke2tlcm5lbF92ZXJzaW9uX3BhcnRzWzBdfS8ke2tlcm5lbF92ZXJzaW9uX3BhcnRzWzFdfS8ka2VybmVsX2FyY2gvJGtlcm5lbF9jb3JlLnJwbSAtLW91dHB1dCAkdGVtcF9mb2xkZXIvJGtlcm5lbF9jb3JlLnJwbSAtLXJldHJ5IDEwIgogICAgICAgIGN1cmwgLXMgIiRmZWRvcmFfZG93bmxvYWRfYmFzZV91cmwiLyIke2tlcm5lbF92ZXJzaW9uX3BhcnRzWzBdfSIvIiR7a2VybmVsX3ZlcnNpb25fcGFydHNbMV19Ii8iJGtlcm5lbF9hcmNoIi8iJGtlcm5lbF9jb3JlIi5ycG0gLS1vdXRwdXQgJHRlbXBfZm9sZGVyLyIka2VybmVsX2NvcmUiLnJwbSAtLXJldHJ5IDEwCiAgICAgICAgZWNobyAiIgogICAgICAgIGVjaG8gIiMjIyMjIyBEb3dubG9hZGluZyB0YXJnZXQga2VybmVsIG1vZHVsZXM6ICRrZXJuZWxfbW9kdWxlcyIKICAgICAgICBlY2hvICJjdXJsICRmZWRvcmFfZG93bmxvYWRfYmFzZV91cmwvJHtrZXJuZWxfdmVyc2lvbl9wYXJ0c1swXX0vJHtrZXJuZWxfdmVyc2lvbl9wYXJ0c1sxXX0vJGtlcm5lbF9hcmNoLyRrZXJuZWxfbW9kdWxlcy5ycG0gLS1vdXRwdXQgJHRlbXBfZm9sZGVyLyRrZXJuZWxfbW9kdWxlcy5ycG0gLS1yZXRyeSAxMCIKICAgICAgICBjdXJsIC1zICIkZmVkb3JhX2Rvd25sb2FkX2Jhc2VfdXJsIi8iJHtrZXJuZWxfdmVyc2lvbl9wYXJ0c1swXX0iLyIke2tlcm5lbF92ZXJzaW9uX3BhcnRzWzFdfSIvIiRrZXJuZWxfYXJjaCIvIiRrZXJuZWxfbW9kdWxlcyIucnBtIC0tb3V0cHV0ICR0ZW1wX2ZvbGRlci8iJGtlcm5lbF9tb2R1bGVzIi5ycG0gLS1yZXRyeSAxMAogICAgICAgIGVjaG8gIiIKICAgICAgICBlY2hvICIjIyMjIyMgRG93bmxvYWRpbmcgdGFyZ2V0IGtlcm5lbCBtb2R1bGVzIGV4dHJhOiAka2VybmVsX21vZHVsZXNfZXh0cmEiCiAgICAgICAgZWNobyAiY3VybCAkZmVkb3JhX2Rvd25sb2FkX2Jhc2VfdXJsLyR7a2VybmVsX3ZlcnNpb25fcGFydHNbMF19LyR7a2VybmVsX3ZlcnNpb25fcGFydHNbMV19LyRrZXJuZWxfYXJjaC8ka2VybmVsX21vZHVsZXNfZXh0cmEucnBtIC0tb3V0cHV0ICR0ZW1wX2ZvbGRlci8ka2VybmVsX21vZHVsZXNfZXh0cmEucnBtIC0tcmV0cnkgMTAiCiAgICAgICAgY3VybCAtcyAiJGZlZG9yYV9kb3dubG9hZF9iYXNlX3VybCIvIiR7a2VybmVsX3ZlcnNpb25fcGFydHNbMF19Ii8iJHtrZXJuZWxfdmVyc2lvbl9wYXJ0c1sxXX0iLyIka2VybmVsX2FyY2giLyIka2VybmVsX21vZHVsZXNfZXh0cmEiLnJwbSAtLW91dHB1dCAkdGVtcF9mb2xkZXIvIiRrZXJuZWxfbW9kdWxlc19leHRyYSIucnBtIC0tcmV0cnkgMTAKICAgICAgICBlY2hvICIiCiAgICAgICAgZWNobyAiIyMjIyMjIERvd25sb2FkaW5nIHRhcmdldCBrZXJuZWw6ICRrZXJuZWwiCiAgICAgICAgZWNobyAiY3VybCAkZmVkb3JhX2Rvd25sb2FkX2Jhc2VfdXJsLyR7a2VybmVsX3ZlcnNpb25fcGFydHNbMF19LyR7a2VybmVsX3ZlcnNpb25fcGFydHNbMV19LyRrZXJuZWxfYXJjaC8ka2VybmVsLnJwbSAtLW91dHB1dCAkdGVtcF9mb2xkZXIvJGtlcm5lbC5ycG0gLS1yZXRyeSAxMCIKICAgICAgICBjdXJsIC1zICIkZmVkb3JhX2Rvd25sb2FkX2Jhc2VfdXJsIi8iJHtrZXJuZWxfdmVyc2lvbl9wYXJ0c1swXX0iLyIke2tlcm5lbF92ZXJzaW9uX3BhcnRzWzFdfSIvIiRrZXJuZWxfYXJjaCIvIiRrZXJuZWwiLnJwbSAtLW91dHB1dCAkdGVtcF9mb2xkZXIvIiRrZXJuZWwiLnJwbSAtLXJldHJ5IDEwCiAgICAgICAgCiAgICAgICAgZWNobyAiIgogICAgICAgIGVjaG8gIiMjIyMjIyBJbnN0YWxsaW5nIHRoZSB0YXJnZXQga2VybmVsIgogICAgICAgIHJwbS1vc3RyZWUgb3ZlcnJpZGUgcmVwbGFjZSAiJHRlbXBfZm9sZGVyIi8iJGtlcm5lbF9jb3JlIi5ycG0gIiR0ZW1wX2ZvbGRlciIvIiRrZXJuZWxfbW9kdWxlcyIucnBtICIkdGVtcF9mb2xkZXIiLyIka2VybmVsX21vZHVsZXNfZXh0cmEiLnJwbSAiJHRlbXBfZm9sZGVyIi8iJGtlcm5lbCIucnBtCiAgICAgICAgdGFyZ2V0X29zdHJlZV9vdmVycmlkZV9leGl0X2NvZGU9JD8KICAgICAgICAKICAgICAgICBpZiBbWyAiJHt0YXJnZXRfb3N0cmVlX292ZXJyaWRlX2V4aXRfY29kZX0iIC1lcSAwIF1dOyB0aGVuIAogICAgICAgICAgaXNfcmVib290X3JlcXVpcmVkPTEgCiAgICAgICAgZmkKICAgICAgICAjIyBWZXJpZnkgdGhlIGNoZWNrc3VtIG9mIHRoZSBkb3dubG9hZGVkIHRhcmdldCBrZXJuZWwKCiAgICAgICAgIyMgQ2hlY2sgdGhlIHJwbSBvc3RyZWUgCiAgICAgICAgZWNobyAiIyMjIyMjIFRhcmdldCBPU1RyZWUiCiAgICAgICAgcnBtLW9zdHJlZSBzdGF0dXMKCiAgICAgICAgIyBlY2hvICIjIyBDbGVhbiB1cCIKICAgICAgICBlY2hvICIiCiAgICAgICAgZWNobyAiIyMjIyMjIENsZWFuIHVwIGRvd25sb2FkZWQgZmlsZXMiCiAgICAgICAgbHMgLWxydCAvdG1wICYmIHJtIC1yZiAgL3RtcC9rZXJuZWwqICYmIGxzIC1scnQgL3RtcAoKICAgICAgICAjIyBSZWJvb3QgdG8gbWFrZSB0aGUgbmV3IHJwbSBvc3RyZWUgZWZmZWN0aXZlCiAgICAgICAgZWNobyAiIgogICAgICAgIGVjaG8gIiMjIyMjIyBJcyByZWJvb3QgcmVxdWlyZWQ/OiAkaXNfcmVib290X3JlcXVpcmVkIgogICAgICAgIGlmIFtbICIke2lzX3JlYm9vdF9yZXF1aXJlZH0iIC1lcSAxIF1dOyB0aGVuCiAgICAgICAgICBzeXN0ZW1jdGwgcmVib290CiAgICAgICAgZmkKCiAgICBmaQogIGVsc2UgIAogICAgZWNobyAiIgogICAgZWNobyAiIyMjIyMjIENvdWxkIG5vdCBwcm9jZXNzIHRoZSAvZXRjL29wZW5zaGlmdGN1c3RvbWtlcm5lbGQvb3BlbnNoaWZ0Y3VzdG9ta2VybmVsLmNvbmYgZmlsZSIKZmk=
        mode: 365
        overwrite: true
        path: /etc/openshiftcustomkerneld/openshiftcustomkernel.sh