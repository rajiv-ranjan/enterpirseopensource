apiVersion: machineconfiguration.openshift.io/v1
kind: MachineConfig
metadata:
  labels:
    machineconfiguration.openshift.io/role: edgeclass1
  name: 70-edgeclass1
spec:
  config:
    ignition:
      version: 3.1.0
    storage:
      files:
      - contents:
          source: data:text/plain;charset=utf-8;base64,IyMgVmFyaWFibGVzIGZvciBrZXJuZWwgc3dhcHBpbmcgaW4gUmVkIEhhdCBDb3JlT1MKIyMgUlBNIHJlcG9zaXRvcnkKIyMgaHR0cHM6Ly9rb2ppLmZlZG9yYXByb2plY3Qub3JnL2tvamkvcGFja2FnZWluZm8/cGFja2FnZUlEPTgKIyMgaHR0cHM6Ly9rb2ppLmZlZG9yYXByb2plY3Qub3JnL2tvamkvYnVpbGRpbmZvP2J1aWxkSUQ9MTcyMjMxMAojIyBTYW1wbGUgUGFja2FnZSBjby1vcmRpbmF0ZXMKIyMgaHR0cHM6Ly9rb2ppcGtncy5mZWRvcmFwcm9qZWN0Lm9yZy8vcGFja2FnZXMva2VybmVsLzUuMTAuMjMvMjAwLmZjMzMveDg2XzY0L2tlcm5lbC01LjEwLjIzLTIwMC5mYzMzLng4Nl82NC5ycG0KIyMgaHR0cHM6Ly9rb2ppcGtncy5mZWRvcmFwcm9qZWN0Lm9yZy8vcGFja2FnZXMva2VybmVsLzUuMTAuMjMvMjAwLmZjMzMveDg2XzY0L2tlcm5lbC1jb3JlLTUuMTAuMjMtMjAwLmZjMzMueDg2XzY0LnJwbQojIyBodHRwczovL2tvamlwa2dzLmZlZG9yYXByb2plY3Qub3JnLy9wYWNrYWdlcy9rZXJuZWwvNS4xMC4yMy8yMDAuZmMzMy94ODZfNjQva2VybmVsLW1vZHVsZXMtNS4xMC4yMy0yMDAuZmMzMy54ODZfNjQucnBtCiMjIGh0dHBzOi8va29qaXBrZ3MuZmVkb3JhcHJvamVjdC5vcmcvL3BhY2thZ2VzL2tlcm5lbC81LjEwLjIzLzIwMC5mYzMzL3g4Nl82NC9rZXJuZWwtbW9kdWxlcy1leHRyYS01LjEwLjIzLTIwMC5mYzMzLng4Nl82NC5ycG0KCmZlZG9yYV9kb3dubG9hZF9iYXNlX3VybD1odHRwczovL2tvamlwa2dzLmZlZG9yYXByb2plY3Qub3JnLy9wYWNrYWdlcy9rZXJuZWwKa2VybmVsX3ZlcnNpb249CiNrZXJuZWxfdmVyc2lvbj01LjEwLjIzLTIwMC5mYzMzCiNrZXJuZWxfdmVyc2lvbj01LjExLjctMjAwLmZjMzMKa2VybmVsX2FyY2g9eDg2XzY0Cgo=
        mode: 420
        overwrite: true
        path: /etc/openshiftcustomkerneld/openshiftcustomkernel.conf
      - contents:
          source: data:text/plain;charset=utf-8;base64,IyEvYmluL2Jhc2gKCnRlbXBfZm9sZGVyPS90bXAKaXNfcmVib290X3JlcXVpcmVkPTAKCiMjIEN1cnJlbnQgT1NUcmVlCmVjaG8gIiIKZWNobyAiIgplY2hvICIjIyMjIyMjIyMjIyMgQ3VycmVudCBPU1RyZWUgIyMjIyMjIyMjIyMjIgpycG0tb3N0cmVlIHN0YXR1cwoKZWNobyAiIgplY2hvICIjIyMjIyMgVGFyZ2V0IGtlcm5lbCBkZXRhaWxzIgoKIyMgQ2hlY2sgaWYgdGhlIGNvbmYgZmlsZSBpcyBwcmVzZW50IGFuZCByZXRyaWV2ZSB0aGUgdmFyaWFibGVzCmlmIHRlc3QgLWYgL2V0Yy9vcGVuc2hpZnRjdXN0b21rZXJuZWxkL29wZW5zaGlmdGN1c3RvbWtlcm5lbC5jb25mIDsgCiAgdGhlbgogICAgLiAvZXRjL29wZW5zaGlmdGN1c3RvbWtlcm5lbGQvb3BlbnNoaWZ0Y3VzdG9ta2VybmVsLmNvbmYKCiAgICBrZXJuZWxfdmVyc2lvbj1gZWNobyAka2VybmVsX3ZlcnNpb24gfCBzZWQgJ3MvICokLy9nJ2AKICAgIGtlcm5lbF9hcmNoPWBlY2hvICRrZXJuZWxfYXJjaCB8IHNlZCAncy8gKiQvL2cnYAogICAgCiAgICBrZXJuZWw9a2VybmVsLSRrZXJuZWxfdmVyc2lvbi4ka2VybmVsX2FyY2gKICAgIGtlcm5lbF9jb3JlPWtlcm5lbC1jb3JlLSRrZXJuZWxfdmVyc2lvbi4ka2VybmVsX2FyY2gKICAgIGtlcm5lbF9tb2R1bGVzPWtlcm5lbC1tb2R1bGVzLSRrZXJuZWxfdmVyc2lvbi4ka2VybmVsX2FyY2gKICAgIGtlcm5lbF9tb2R1bGVzX2V4dHJhPWtlcm5lbC1tb2R1bGVzLWV4dHJhLSRrZXJuZWxfdmVyc2lvbi4ka2VybmVsX2FyY2gKICAgICNvcGVuc2hpZnRfYmFzZV9rZXJuZWw9JG9wZW5zaGlmdF9iYXNlX2tlcm5lbAoKICAgICNlY2hvICJiYXNlIG9wZW5zaGlmdCBrZXJuZWw9JG9wZW5zaGlmdF9iYXNlX2tlcm5lbCIKICAgIGVjaG8gInRhcmdldCBrZXJuZWxfdmVyc2lvbj0ka2VybmVsX3ZlcnNpb24iCiAgICBlY2hvICJ0YXJnZXQga2VybmVsX2FyY2g9JGtlcm5lbF9hcmNoIgogICAgZWNobyAidGFyZ2V0IGtlcm5lbCBwYWNrYWdlPSRrZXJuZWwiCiAgICBlY2hvICJ0YXJnZXQga2VybmVsX2NvcmUgcGFja2FnZT0ka2VybmVsX2NvcmUiCiAgICBlY2hvICJ0YXJnZXQga2VybmVsX21vZHVsZXMgcGFja2FnZT0ka2VybmVsX21vZHVsZXMiCiAgICBlY2hvICJ0YXJnZXQga2VybmVsX21vZHVsZXNfZXh0cmEgcGFja2FnZT0ka2VybmVsX21vZHVsZXNfZXh0cmEiCgogICAgIyMgQ2hlY2sgaWYgdGhlIHRhcmdldCBrZXJuZWwgaXMgZW1wdHkKCiAgICBpZiBbICIka2VybmVsX3ZlcnNpb24iID09ICIiIF0KICAgICAgdGhlbgogICAgICAgIGVjaG8gIiIKICAgICAgICBlY2hvICIjIyMjIyMgTm8gdmFsdWUgc2V0IGZvciB2YXJpYWJsZSBrZXJuZWxfdmVyc2lvbi4gT1Mgd2lsbCBiZSBmYWN0b3J5IHJlc2V0LiIKICAgICAgICBycG0tb3N0cmVlIHJlc2V0IC1sbyAtcgogICAgICAgIGV4aXQgMAogICAgZmkKCiAgICAjIyBDaGVjayBpZiB0aGUgdGFyZ2V0IGtlcm5lbCBpcyBhbHJlYWR5IGluc3RhbGxlZAogICAgZWNobyAiIgogICAgZWNobyAiIyMjIyMjIENoZWNraW5nIGZvciB0YXJnZXQgcGFja2FnZXMgaW5zdGFsbCBzdGF0ZSIKICAgIHJwbSAtcSAka2VybmVsX2NvcmUKICAgIGlzX2tlcm5lbF9jb3JlX2luc3RhbGxlZD0kPwogICAgZWNobyAiIgoKCiAgICAjIyBEb3dubG9hZCBhbmQgaW5zdGFsbCB0aGUgdGFyZ2V0IGtlcm5lbCBpZiBub3QgaW5zdGFsbGVkCgogICAga2VybmVsX3ZlcnNpb25fcGFydHM9KCR7a2VybmVsX3ZlcnNpb24vLy0vIH0pCgogICAgaWYgWyAkaXNfa2VybmVsX2NvcmVfaW5zdGFsbGVkIC1lcSAwIF0gOyAKICAgICAgdGhlbgogICAgICAgIGVjaG8gIiIKICAgICAgICBlY2hvICIjIyMjIyMgVGFyZ2V0IGtlcm5lbCBhbHJlYWR5IGluc3RhbGxlZDogJGtlcm5lbF9jb3JlIgoKICAgICAgZWxzZQogICAgICAgIHJwbS1vc3RyZWUgcmVzZXQgLWxvCgogICAgICAgIGVjaG8gIiIKICAgICAgICBlY2hvICIjIyMjIyMgRG93bmxvYWRpbmcgdGFyZ2V0IGtlcm5lbCBjb3JlOiAka2VybmVsX2NvcmUiCiAgICAgICAgZWNobyAiY3VybCAkZmVkb3JhX2Rvd25sb2FkX2Jhc2VfdXJsLyR7a2VybmVsX3ZlcnNpb25fcGFydHNbMF19LyR7a2VybmVsX3ZlcnNpb25fcGFydHNbMV19LyRrZXJuZWxfYXJjaC8ka2VybmVsX2NvcmUucnBtIC0tb3V0cHV0ICR0ZW1wX2ZvbGRlci8ka2VybmVsX2NvcmUucnBtIgogICAgICAgIGN1cmwgLXMgJGZlZG9yYV9kb3dubG9hZF9iYXNlX3VybC8ke2tlcm5lbF92ZXJzaW9uX3BhcnRzWzBdfS8ke2tlcm5lbF92ZXJzaW9uX3BhcnRzWzFdfS8ka2VybmVsX2FyY2gvJGtlcm5lbF9jb3JlLnJwbSAtLW91dHB1dCAkdGVtcF9mb2xkZXIvJGtlcm5lbF9jb3JlLnJwbQogICAgICAgIGVjaG8gIiIKICAgICAgICBlY2hvICIjIyMjIyMgRG93bmxvYWRpbmcgdGFyZ2V0IGtlcm5lbCBtb2R1bGVzOiAka2VybmVsX21vZHVsZXMiCiAgICAgICAgZWNobyAiY3VybCAkZmVkb3JhX2Rvd25sb2FkX2Jhc2VfdXJsLyR7a2VybmVsX3ZlcnNpb25fcGFydHNbMF19LyR7a2VybmVsX3ZlcnNpb25fcGFydHNbMV19LyRrZXJuZWxfYXJjaC8ka2VybmVsX21vZHVsZXMucnBtIC0tb3V0cHV0ICR0ZW1wX2ZvbGRlci8ka2VybmVsX21vZHVsZXMucnBtIgogICAgICAgIGN1cmwgLXMgJGZlZG9yYV9kb3dubG9hZF9iYXNlX3VybC8ke2tlcm5lbF92ZXJzaW9uX3BhcnRzWzBdfS8ke2tlcm5lbF92ZXJzaW9uX3BhcnRzWzFdfS8ka2VybmVsX2FyY2gvJGtlcm5lbF9tb2R1bGVzLnJwbSAtLW91dHB1dCAkdGVtcF9mb2xkZXIvJGtlcm5lbF9tb2R1bGVzLnJwbQogICAgICAgIGVjaG8gIiIKICAgICAgICBlY2hvICIjIyMjIyMgRG93bmxvYWRpbmcgdGFyZ2V0IGtlcm5lbCBtb2R1bGVzIGV4dHJhOiAka2VybmVsX21vZHVsZXNfZXh0cmEiCiAgICAgICAgZWNobyAiY3VybCAkZmVkb3JhX2Rvd25sb2FkX2Jhc2VfdXJsLyR7a2VybmVsX3ZlcnNpb25fcGFydHNbMF19LyR7a2VybmVsX3ZlcnNpb25fcGFydHNbMV19LyRrZXJuZWxfYXJjaC8ka2VybmVsX21vZHVsZXNfZXh0cmEucnBtIC0tb3V0cHV0ICR0ZW1wX2ZvbGRlci8ka2VybmVsX21vZHVsZXNfZXh0cmEucnBtIgogICAgICAgIGN1cmwgLXMgJGZlZG9yYV9kb3dubG9hZF9iYXNlX3VybC8ke2tlcm5lbF92ZXJzaW9uX3BhcnRzWzBdfS8ke2tlcm5lbF92ZXJzaW9uX3BhcnRzWzFdfS8ka2VybmVsX2FyY2gvJGtlcm5lbF9tb2R1bGVzX2V4dHJhLnJwbSAtLW91dHB1dCAkdGVtcF9mb2xkZXIvJGtlcm5lbF9tb2R1bGVzX2V4dHJhLnJwbQogICAgICAgIGVjaG8gIiIKICAgICAgICBlY2hvICIjIyMjIyMgRG93bmxvYWRpbmcgdGFyZ2V0IGtlcm5lbDogJGtlcm5lbCIKICAgICAgICBlY2hvICJjdXJsICRmZWRvcmFfZG93bmxvYWRfYmFzZV91cmwvJHtrZXJuZWxfdmVyc2lvbl9wYXJ0c1swXX0vJHtrZXJuZWxfdmVyc2lvbl9wYXJ0c1sxXX0vJGtlcm5lbF9hcmNoLyRrZXJuZWwucnBtIC0tb3V0cHV0ICR0ZW1wX2ZvbGRlci8ka2VybmVsLnJwbSIKICAgICAgICBjdXJsIC1zICRmZWRvcmFfZG93bmxvYWRfYmFzZV91cmwvJHtrZXJuZWxfdmVyc2lvbl9wYXJ0c1swXX0vJHtrZXJuZWxfdmVyc2lvbl9wYXJ0c1sxXX0vJGtlcm5lbF9hcmNoLyRrZXJuZWwucnBtIC0tb3V0cHV0ICR0ZW1wX2ZvbGRlci8ka2VybmVsLnJwbQogICAgICAgIAogICAgICAgIGVjaG8gIiIKICAgICAgICBlY2hvICIjIyMjIyMgSW5zdGFsbGluZyB0aGUgdGFyZ2V0IGtlcm5lbCIKICAgICAgICBycG0tb3N0cmVlIG92ZXJyaWRlIHJlcGxhY2UgJHRlbXBfZm9sZGVyLyRrZXJuZWxfY29yZS5ycG0gJHRlbXBfZm9sZGVyLyRrZXJuZWxfbW9kdWxlcy5ycG0gJHRlbXBfZm9sZGVyLyRrZXJuZWxfbW9kdWxlc19leHRyYS5ycG0gJHRlbXBfZm9sZGVyLyRrZXJuZWwucnBtCgogICAgICAgIFtbICQ/IC1lcSAwIF1dICYmIGlzX3JlYm9vdF9yZXF1aXJlZD0xIAogICAgICAgIAogICAgICAgICMjIFZlcmlmeSB0aGUgY2hlY2tzdW0gb2YgdGhlIGRvd25sb2FkZWQgdGFyZ2V0IGtlcm5lbAoKICAgICAgICAjIyBDaGVjayB0aGUgcnBtIG9zdHJlZSAKICAgICAgICBlY2hvICIjIyMjIyMgVGFyZ2V0IE9TVHJlZSIKICAgICAgICBycG0tb3N0cmVlIHN0YXR1cwoKICAgICAgICAjIGVjaG8gIiMjIENsZWFuIHVwIgogICAgICAgIGVjaG8gIiIKICAgICAgICBlY2hvICIjIyMjIyMgQ2xlYW4gdXAgZG93bmxvYWRlZCBmaWxlcyIKICAgICAgICBscyAtbHJ0IC90bXAgJiYgcm0gLXJmICAvdG1wL2tlcm5lbCogJiYgbHMgLWxydCAvdG1wCgogICAgICAgICMjIFJlYm9vdCB0byBtYWtlIHRoZSBuZXcgcnBtIG9zdHJlZSBlZmZlY3RpdmUKICAgICAgICBlY2hvICIiCiAgICAgICAgZWNobyAiIyMjIyMjIElzIHJlYm9vdCByZXF1aXJlZD86ICRpc19yZWJvb3RfcmVxdWlyZWQiCiAgICAgICAgW1sgaXNfcmVib290X3JlcXVpcmVkIC1lcSAxIF1dICYmIHN5c3RlbWN0bCByZWJvb3QKCiAgICBmaQogIGVsc2UgIAogICAgZWNobyAiIgogICAgZWNobyAiIyMjIyMjIENvdWxkIG5vdCBwcm9jZXNzIHRoZSAvZXRjL29wZW5zaGlmdGN1c3RvbWtlcm5lbGQvb3BlbnNoaWZ0Y3VzdG9ta2VybmVsLmNvbmYgZmlsZSIKZmkK
        mode: 365
        overwrite: true
        path: /etc/openshiftcustomkerneld/openshiftcustomkernel.sh